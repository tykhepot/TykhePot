# TykhePot ($TPOT) æ™ºèƒ½åˆçº¦

åŸºäº Solana + Anchor æ¡†æ¶çš„å…¬å¹³é€æ˜å¥–æ± åˆçº¦ã€‚

## é¡¹ç›®ç»“æ„

```
programs/royalpot/src/
â”œâ”€â”€ lib.rs          # ä¸»åˆçº¦ï¼šå¥–æ± æ ¸å¿ƒé€»è¾‘
â”œâ”€â”€ staking.rs      # è´¨æŠ¼æ¨¡å—
â”œâ”€â”€ airdrop.rs      # ç©ºæŠ•æ¨¡å—
â””â”€â”€ randomness.rs   # éšæœºæ•°ä¸å¼€å¥–é€»è¾‘
```

## æ ¸å¿ƒåŠŸèƒ½

### 1. åŒå¥–æ± ç³»ç»Ÿ

| å¥–æ±  | å¼€å¥–å‘¨æœŸ | æœ€ä½æŠ•å…¥ | æ¨å¹¿å¥–åŠ± |
|------|----------|----------|----------|
| å°æ—¶æ±  | æ¯æ•´ç‚¹ | 200 TPOT | âŒ æ—  |
| å¤©æ±  | æ¯æ—¥0:00 | 100 TPOT | âœ… 8% |

### 2. èµ„é‡‘åˆ†é… (æ¯100 TPOT)

```
é”€æ¯: 3% (æ°¸ä¹…é€šç¼©)
å¹³å°: 2% (è¿è¥)
å¥–æ± : 95% (ç”¨æˆ·è´¡çŒ®)
å‚¨å¤‡é…æ¯”: 1:1 (ä»…å¤©æ± ï¼Œå‚¨å¤‡è€—å°½ååœæ­¢)
```

### 3. å¥–é‡‘åˆ†é…

| å¥–é¡¹ | æ¯”ä¾‹ | äººæ•° | é‡Šæ”¾æ–¹å¼ |
|------|------|------|----------|
| å¤´å¥– | 30% | 1 | 20å¤©çº¿æ€§é‡Šæ”¾ |
| äºŒç­‰å¥– | 20% | 2 | 20å¤©çº¿æ€§é‡Šæ”¾ |
| ä¸‰ç­‰å¥– | 15% | 3 | 20å¤©çº¿æ€§é‡Šæ”¾ |
| å¹¸è¿å¥– | 10% | 5 | 20å¤©çº¿æ€§é‡Šæ”¾ |
| æ™®æƒ å¥– | 20% | æ‰€æœ‰æœªä¸­å¤§å¥–è€… | ç«‹å³åˆ°è´¦ |
| å›æµ | 5% | - | æ»šå…¥ä¸‹æœŸ |

### 4. è´¨æŠ¼ç³»ç»Ÿ

| æ¡£ä½ | é”å®šæœŸ | å¹´åŒ–æ”¶ç›Š | æå‰èµå› |
|------|--------|----------|----------|
| çŸ­æœŸ | 30å¤© | 8% | æœ¬é‡‘å…¨è¿”ï¼Œ0æ”¶ç›Š |
| é•¿æœŸ | 180å¤© | 48% | æœ¬é‡‘å…¨è¿”ï¼Œ0æ”¶ç›Š |

### 5. ç©ºæŠ•ç³»ç»Ÿ

- æ€»é‡ï¼š2äº¿ TPOT (20%)
- é¢†å–æ¡ä»¶ï¼šéœ€ä»æ¸¸æˆä¸­è·åˆ©åæ‰èƒ½æå–
- è®¡ç®—æ–¹å¼ï¼šè·åˆ©é‡‘é¢ Ã— 10å€ (æœ€é«˜10,000 TPOT)

## æŠ€æœ¯æ¶æ„

### éšæœºæ•°æ–¹æ¡ˆ

ä½¿ç”¨ **Switchboard VRF** (å¯éªŒè¯éšæœºå‡½æ•°)ï¼š
- é“¾ä¸Šå¯éªŒè¯çš„å…¬å¹³éšæœºæ•°
- é˜²ç¯¡æ”¹ã€å¯å®¡è®¡
- å¼€å¥–è¿‡ç¨‹é€æ˜

### ä»£å¸æ ‡å‡†

- **SPL Token** æ ‡å‡†
- ç²¾åº¦ï¼š9ä½å°æ•°
- æ€»é‡ï¼š10äº¿ TPOT

### è´¦æˆ·ç»“æ„

```rust
// åè®®çŠ¶æ€è´¦æˆ·
ProtocolState {
    authority: Pubkey,           // ç®¡ç†å‘˜
    token_mint: Pubkey,          // TPOTä»£å¸
    hourly_pool: PrizePool,      // å°æ—¶æ± 
    daily_pool: PrizePool,       // å¤©æ± 
    reserve_balance: u64,        // å‚¨å¤‡ä½™é¢
    referral_pool_balance: u64,  // æ¨å¹¿æ± ä½™é¢
    total_burned: u64,           // æ€»é”€æ¯é‡
    ...
}

// ç”¨æˆ·çŠ¶æ€è´¦æˆ·
UserState {
    owner: Pubkey,
    referrer: Option<Pubkey>,    // é‚€è¯·äºº
    hourly_tickets: u64,
    daily_tickets: u64,
    vesting_schedules: Vec<VestingSchedule>,
}
```

## åˆçº¦æ¥å£

### åˆå§‹åŒ–
```rust
initialize(params: InitializeParams)
```

### å‚ä¸å¥–æ± 
```rust
deposit_hourly(amount: u64)                    // å‚ä¸å°æ—¶æ± 
deposit_daily(amount: u64, referrer: Option<Pubkey>)  // å‚ä¸å¤©æ± 
```

### å¼€å¥–
```rust
draw_hourly(randomness: [u8; 32])              // å°æ—¶æ± å¼€å¥–
draw_daily(randomness: [u8; 32])               // å¤©æ± å¼€å¥–
```

### é¢†å–å¥–é‡‘
```rust
claim_vested()                                 // é¢†å–å·²è§£é”å¥–é‡‘
```

### è´¨æŠ¼
```rust
stake_short_term(amount: u64)                  // 30å¤©è´¨æŠ¼
stake_long_term(amount: u64)                   // 180å¤©è´¨æŠ¼
auto_release()                                 // åˆ°æœŸè‡ªåŠ¨é‡Šæ”¾
early_withdraw()                               // æå‰èµå›
```

### ç©ºæŠ•
```rust
record_profit(profit_amount: u64)              // è®°å½•æ¸¸æˆè·åˆ©
claim_airdrop()                                // é¢†å–ç©ºæŠ•
```

## éƒ¨ç½²æ­¥éª¤

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# å®‰è£…ä¾èµ–
npm install

# é…ç½® Solana CLI
solana config set --url devnet
solana-keygen new --outfile ~/.config/solana/id.json
```

### 2. æ„å»ºåˆçº¦
```bash
anchor build
```

### 3. éƒ¨ç½²åˆçº¦
```bash
anchor deploy
```

### 4. åˆå§‹åŒ–
```bash
ts-node scripts/initialize.ts
```

### 5. è®¾ç½®å„æ± å­
```bash
ts-node scripts/setup_pools.ts
```

## å®‰å…¨å®¡è®¡æ¸…å•

- [ ] éšæœºæ•°æ¥æºéªŒè¯
- [ ] é‡å…¥æ”»å‡»é˜²æŠ¤
- [ ] æ•´æ•°æº¢å‡ºæ£€æŸ¥
- [ ] æƒé™æ§åˆ¶éªŒè¯
- [ ] èµ„é‡‘æå–å®‰å…¨
- [ ] æ—¶é—´é”æœºåˆ¶
- [ ] ç´§æ€¥æš‚åœåŠŸèƒ½

## æµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•
anchor test

# æŒ‡å®šæµ‹è¯•æ–‡ä»¶
anchor test --skip-build tests/royalpot.ts
```

## çŠ¶æ€è¯´æ˜

**å¼€å‘è¿›åº¦: 90%**

- âœ… æ ¸å¿ƒå¥–æ± é€»è¾‘
- âœ… åŒæ± å­˜æ¬¾/å¼€å¥–
- âœ… è´¨æŠ¼ç³»ç»Ÿ
- âœ… ç©ºæŠ•ç³»ç»Ÿ
- âœ… éšæœºæ•°ç”Ÿæˆ
- âœ… ä»£å¸é”€æ¯æœºåˆ¶
- âœ… æ¨å¹¿å¥–åŠ±
- ğŸ”„ VRFé›†æˆ (éœ€æµ‹è¯•ç½‘éªŒè¯)
- ğŸ”„ å‰ç«¯SDK
- â³ å®‰å…¨å®¡è®¡
- â³ ä¸»ç½‘éƒ¨ç½²

---

**æ³¨æ„**: æœ¬åˆçº¦ä»…ä¾›å¨±ä¹ç”¨é€”ï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®ã€‚
